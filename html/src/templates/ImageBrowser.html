<div x-data="App.ImageBrowser()" x-cloak class="bg-white p-4 inline-block rounded shadow border border-sky-200" :class="{'is-loading': isLoading}">
    <h1 class="text-xl font-bold mb-4">
        Image Browser
    </h1>
    <table class="border">
        <thead>
        <tr>
            <th class="border px-2 py-1 text-center">Idx</th>
            <th class="border px-2">Filename</th>
            <th class="border px-2 text-right">Size</th>
            <th colspan="2" class="border"></th>
        </tr>
        </thead>
        <tbody>
        <template x-for="file in files">
            <tr>
                <td x-text="file.index" class="border px-2 py-1 text-center"></td>
                <td x-text="file.name" class="border px-2"></td>
                <td x-text="format(file.size)" class="border px-2 text-right"></td>
                <td class="px-2 py-1 border text-center">
                    <a :href="`/view?filename=${file.name}`" target="_blank" class="block" title="View">
                        <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="24" height="24" viewBox="0 0 451 451"><path d="m447.05 428-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
                    </a>
                </td>
                <td class="px-2 py-1 border text-center">
                    <a @click.prevent="remove(file.name)" class="block cursor-pointer" title="Delete">
                        <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="24" height="24" viewBox="0 0 457.503 457.503"><path d="M381.575 57.067h-90.231C288.404 25.111 261.461 0 228.752 0S169.1 25.111 166.16 57.067H75.929c-26.667 0-48.362 21.695-48.362 48.362 0 26.018 20.655 47.292 46.427 48.313v246.694c0 31.467 25.6 57.067 57.067 57.067h195.381c31.467 0 57.067-25.6 57.067-57.067V153.741c25.772-1.02 46.427-22.294 46.427-48.313 0-26.667-21.694-48.361-48.361-48.361zm-215.734 319.75c0 8.013-6.496 14.509-14.508 14.509-8.013 0-14.508-6.496-14.508-14.509V186.113c0-8.013 6.496-14.508 14.508-14.508 8.013 0 14.508 6.496 14.508 14.508v190.704zm77.419 0c0 8.013-6.496 14.509-14.508 14.509-8.013 0-14.508-6.496-14.508-14.509V186.113c0-8.013 6.496-14.508 14.508-14.508 8.013 0 14.508 6.496 14.508 14.508v190.704zm77.419 0c0 8.013-6.496 14.509-14.508 14.509-8.013 0-14.509-6.496-14.509-14.509V186.113c0-8.013 6.496-14.508 14.509-14.508s14.508 6.496 14.508 14.508v190.704z"/></svg>
                    </a>
                </td>
                <td class="px-2 py-1 border text-center">
                    <a @click.prevent="rename(file.name)" class="block cursor-pointer" title="Rename">
                        <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="24" height="24" viewBox="0 0 490.305 490.305"><path d="m472.469 81.443-63.6-63.6c-13.1-16.4-53.2-30.2-83.4 0l-290.9 289.9c-4.4 4.4-6.5 10.1-6.2 15.6l-27.1 141.8c-4.2 16.2 11.9 26.6 22.9 25l147-29.2c4.2 0 7.3-2.1 10.4-5.2l290.9-289.8c23-23 23-61.5 0-84.5zm-117.8-35.4c6.3-7.3 18.8-7.3 26.1 0l17.3 17-289.7 289.7-30.1-30.4 276.4-276.3zm-292.9 318 64.4 64.4-80.1 15.8 15.7-80.2zm382.6-228.4-276.8 276.8-30.1-30.4 290-290 16.8 16.5c9.2 9.8 4.9 22.2.1 27.1z"/></svg>
                    </a>
                </td>
            </tr>
        </template>
        </tbody>
    </table>
    <div class="flex flex-row mt-4">
        <!-- navigation -->
        <template x-if="hasPagination">
            <div class="flex flex-row space-x-4">
                <button @click.prevent="prev" class="rounded text-white px-2 py-1" :class="{'bg-sky-600': hasPrevPage, 'bg-gray-400': !hasPrevPage}" :disabled="!hasPrevPage">
                    Prev
                </button>
                <button @click.prevent="next" class="rounded text-white px-2 py-1" :class="{'bg-sky-600': hasNextPage, 'bg-gray-400': !hasNextPage}" :disabled="!hasNextPage">
                    Next
                </button>
            </div>
        </template>
        <!-- per page -->
        <div class="ml-auto">
            <select x-model="perPage" class="border px-2 py-1 rounded shadow">
                <option value="10">Show 10</option>
                <option value="30">Show 30</option>
                <option value="50">Show 50</option>
                <option value="100">Show 100</option>
            </select>
        </div>
    </div>

    <div class="text-center mt-4">
        <span @click.prevent="capture" class="inline-block mx-auto rounded-full bg-sky-600 text-white p-4 cursor-pointer" title="Capture new shot">
            <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="32" height="32" viewBox="0 0 487 487" class="fill-current"><path d="M308.1 277.95c0 35.7-28.9 64.6-64.6 64.6s-64.6-28.9-64.6-64.6 28.9-64.6 64.6-64.6 64.6 28.9 64.6 64.6zm132.2-161.9c25.8 0 46.7 20.9 46.7 46.7v226.2c0 27.5-22.3 49.8-49.8 49.8H49.8c-27.5 0-49.8-22.3-49.8-49.8v-226.2c0-25.8 20.9-46.7 46.7-46.7h93.4l4.4-18.6c6.7-28.8 32.4-49.2 62-49.2h74.1c29.6 0 55.3 20.4 62 49.2l4.3 18.6h93.4zm-342.9 67.4c0-12.9-10.5-23.4-23.4-23.4-13 0-23.5 10.5-23.5 23.4s10.5 23.4 23.4 23.4c13 .1 23.5-10.4 23.5-23.4zm261.3 94.5c0-63.6-51.6-115.2-115.2-115.2s-115.2 51.6-115.2 115.2 51.6 115.2 115.2 115.2 115.2-51.6 115.2-115.2z"/></svg>
        </span>
    </div>

</div>