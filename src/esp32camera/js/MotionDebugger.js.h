
                #pragma once
                #define HAS_JS_APP 1

                static const char* JS_APP PROGMEM = R"===(
                    (()=>{"use strict";function p(t,e){var n;if(t)return"string"==typeof t?y(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n,r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(n=function(t){if("object"!==i(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!==i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(o.key),"symbol"===i(n)?n:String(n)),o)}}function t(t,e,n){e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(){}var _;function h(t){return t()}function m(){return Object.create(null)}function b(t){t.forEach(h)}function g(t){return"function"==typeof t}function N(t,e){return t!=t?e==e:t!==e||t&&"object"===i(t)||"function"==typeof t}new Set;var w,n="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function a(t){e(this,a),this.options=t,this._listeners="WeakMap"in n?new WeakMap:void 0}function S(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function E(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function A(){return k(" ")}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){w=t}t(a,[{key:"observe",value:function(t,e){var n=this;return this._listeners.set(t,e),this._getObserver().observe(t,this.options),function(){n._listeners.delete(t),n._observer.unobserve(t)}}},{key:"_getObserver",value:function(){var t,i=this;return null!=(t=this._observer)?t:this._observer=new ResizeObserver(function(t){var e,n,r=function(t,e){var n,r,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,n=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(t)||(a=p(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.entries.set(o.target,o),null!=(e=i._listeners.get(o.target))&&e(o)}}catch(t){r.e(t)}finally{r.f()}})}}]),a.entries="WeakMap"in n?new WeakMap:void 0,new Map;var $=[],I=[],u=[],c=[],D=Promise.resolve(),M=!1;function P(t){u.push(t)}var l=new Set,f=0;function C(){if(0===f){var t=w;do{try{for(;f<$.length;){var e,n=$[f],r=(f++,v(n),e=r=void 0,n.$$);null!==r.fragment&&(r.update(),b(r.before_update),e=r.dirty,r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(P))}}catch(t){throw $.length=0,f=0,t}for(v(null),$.length=0,f=0;I.length;)I.pop()();for(var o=0;o<u.length;o+=1){var i=u[o];l.has(i)||(l.add(i),i())}}while(u.length=0,$.length);for(;c.length;)c.pop()();M=!1,l.clear(),v(t)}}var B=new Set;function W(r,t,e,n,o,i,a,u){var u=7<arguments.length&&void 0!==u?u:[-1],c=w,l=(v(r),r.$$={fragment:null,ctx:[],props:i,update:O,not_equal:o,bound:m(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:m(),dirty:u,skip_bound:!1,root:t.target||c.$$.root});a&&a(l.root);var f,s,d=!1;l.ctx=e?e(r,t.props||{},function(t,e){var n=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return l.ctx&&o(l.ctx[t],l.ctx[t]=n)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](n),d)&&(n=t,-1===(t=r).$$.dirty[0]&&($.push(t),M||(M=!0,D.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31),e}):[],l.update(),d=!0,b(l.before_update),l.fragment=!!n&&n(l.ctx),t.target&&(t.hydrate?(i=t.target,u=Array.from(i.childNodes),l.fragment&&l.fragment.l(u),u.forEach(j)):l.fragment&&l.fragment.c(),t.intro&&(a=r.$$.fragment)&&a.i&&(B.delete(a),a.i(s)),f=r,e=t.target,n=t.anchor,i=t.customElement,u=f.$$,a=u.fragment,u=u.after_update,a&&a.m(e,n),i||P(function(){var t,e,n=f.$$.on_mount.map(h).filter(g);f.$$.on_destroy?(t=f.$$.on_destroy).push.apply(t,function(t){if(Array.isArray(t))return y(t)}(e=n)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):b(n),f.$$.on_mount=[]}),u.forEach(P),C()),v(c)}new Set([].concat(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]));t(o,[{key:"$destroy",value:function(){var t,e,n,r,o;e=1,null!==(t=(t=this).$$).fragment&&(n=t.after_update,r=[],o=[],u.forEach(function(t){return(-1===n.indexOf(t)?r:o).push(t)}),o.forEach(function(t){return t()}),u=r,b(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[]),this.$destroy=O}},{key:"$on",value:function(t,e){var n;return g(e)?((n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[])).push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}):O}},{key:"$set",value:function(t){this.$$set&&0!==Object.keys(t).length&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}]);var U=o;function o(){e(this,o)}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){var n;if(t)return"string"==typeof t?R(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(n){var r,o,i,a,u,c,l,f,s,d,p,y,h,m,b,g,v,w,$;return{c:function(){var t,e;r=E("div"),o=E("div"),i=E("div"),a=E("img"),c=A(),l=E("canvas"),f=A(),(s=E("p")).textContent="RGB stream",d=A(),p=E("div"),y=E("div"),h=E("canvas"),m=A(),(b=E("p")).textContent="Background model",g=A(),v=E("div"),w=E("p"),$=k(n[4]),t=a.src,e=u=n[5],(_=_||document.createElement("a")).href=e,t!==_.href&&T(a,"src",u),T(a,"alt","MJPEG camera stream"),T(a,"width",n[3]),T(a,"height",n[2]),T(l,"class","absolute top-0 left-0"),T(l,"width",n[3]),T(l,"height",n[2]),T(s,"class","absolute bottom-0 left-0 p-2 bg-gray-100 text-gray-800"),T(i,"class","mjpeg relative"),T(o,"class","md:flex-1"),T(h,"width",n[3]),T(h,"height",n[2]),T(b,"class","absolute bottom-0 left-0 p-2 bg-gray-100 text-gray-800"),T(y,"class","background relative"),T(p,"class","md:flex-1"),T(r,"class","flex flex-col md:flex-row"),T(v,"class","md:my-2 p-4 bg-gray-100 text-gray-800 text-lg")},m:function(t,e){x(t,r,e),S(r,o),S(o,i),S(i,a),S(i,c),S(i,l),n[11](l),S(i,f),S(i,s),S(r,d),S(r,p),S(p,y),S(y,h),n[12](h),S(y,m),S(y,b),x(t,g,e),x(t,v,e),S(v,w),S(w,$)},p:function(t,e){n=1;var n,e=(function(t){if(Array.isArray(t))return t}(e=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,n)||F(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];8&e&&T(a,"width",t[3]),4&e&&T(a,"height",t[2]),8&e&&T(l,"width",t[3]),4&e&&T(l,"height",t[2]),8&e&&T(h,"width",t[3]),4&e&&T(h,"height",t[2]),16&e&&(n=$,e=t[4],n.data!==(e=""+e))&&(n.data=e)},i:O,o:O,d:function(t){t&&j(r),n[11](null),n[12](null),t&&j(g),t&&j(v)}}}var J="0123456789abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,;";function H(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=J.indexOf(t);return(function(t){if(Array.isArray(t))return R(t)}(e=new Array(6))||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t,e){return r&1<<5-e?[255,255,0,n]:[0,0,0,0]}).flat()}function K(t,e,c){var r,o,n,l,f,i,a={viridis:[[68,1,84],[69,6,90],[70,12,95],[71,18,101],[71,24,106],[72,29,111],[72,34,115],[71,39,119],[71,44,123],[70,49,126],[69,54,129],[67,59,131],[66,64,133],[64,68,135],[62,73,137],[60,77,138],[58,83,139],[56,87,140],[54,91,140],[52,95,141],[50,99,141],[48,103,141],[46,107,142],[45,111,142],[43,115,142],[42,119,142],[40,122,142],[39,126,142],[37,130,142],[36,134,141],[34,137,141],[33,141,140],[31,146,140],[31,150,139],[30,153,138],[30,157,136],[31,161,135],[32,165,133],[35,168,131],[38,172,129],[42,176,126],[47,179,123],[53,183,120],[59,186,117],[66,190,113],[73,193,109],[81,196,104],[89,199,100],[100,203,93],[109,206,88],[119,208,82],[129,211,76],[139,213,70],[149,215,63],[159,217,56],[170,219,50],[181,221,43],[191,223,36],[202,224,30],[212,225,26],[223,227,24],[233,228,25],[243,229,30],[253,231,36]]},s=0,d=0,p=0,y=0,h=!1,m="",u="".concat(window.location.origin,":81/mjpeg"),b="".concat(window.location.origin,":82").replace("http","ws");function g(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,t=Math.max(0,J.indexOf(t));return a.viridis[t].concat([e])}function v(t,e){var e=new ImageData(e,s,d),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.putImageData(e,0,0),n.globalCompositeOperation="copy",n.drawImage(t,0,0,e.width,e.height,0,0,r,o)}return i=function(){new WebSocket(b).onmessage=function(t){var e,n,r=(m=3e4<(m+=t.data).length?"":m).indexOf("{"),o=m.indexOf("}",r+1);if(!(r<0||o<0)){try{var i=m.substring(r,o-r+2).replace("[,","[").replace(",]","]").replace("{,","{").replace(",}","}"),a=JSON.parse(i),u=(console.log("new frame",a),c(6,s=a.width),c(7,d=a.height),c(9,y=Math.round(1e3/(1+a.benchmark))),c(10,h=a.detected),a.background);u=new Uint8ClampedArray(u.split("").map(g).flat()),v(l,u),e=a.mask,n=new Uint8ClampedArray(e.split("").map(H).flat()),v(f,n),c(8,p=n.filter(function(t,e){return t&&e%4==0}).length/(n.length/4)),window.onmsg&&window.onmsg(a,l,backgroundArray)}catch(t){console.error("e",t)}m=m.substring(o+1)}}},function(){if(w)return w;throw new Error("Function called outside component initialization")}().$$.on_mount.push(i),t.$$.update=function(){64&t.$$.dirty&&c(3,r=8*s),128&t.$$.dirty&&c(2,o=8*d),1792&t.$$.dirty&&c(4,n="Motion detection running at ".concat(y," FPS. ").concat(Math.round(100*p),"% of image is detected as foreground. ").concat(h?"MOTION DETECTED":"MOTION NOT DETECTED"))},[l,f,o,r,n,u,s,d,p,y,h,function(t){I[t?"unshift":"push"](function(){c(1,f=t)})},function(t){I[t?"unshift":"push"](function(){c(0,l=t)})}]}new(function(){var t=i,e=U;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),q(t,e);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();var n,r,o=function(){var t,e=d(n),e=(t=r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)};function i(t){var e;if(this instanceof i)return W(z(e=o.call(this)),t,K,G,N,{}),e;throw new TypeError("Cannot call a class as a function")}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}())({target:document.getElementById("app")})})();
                )===";
            